const {
    Account,
    AggregateTransaction,
    Deadline,
    NetworkType,
    PlainMessage,
    Mosaic,
    MosaicId,
    TransferTransaction,
    UInt64
 } = require('nem2-sdk')

 const recipient = Account.generateNewAccount(NetworkType.MIJIN_TEST)
 const sender = Account.generateNewAccount(NetworkType.MIJIN_TEST)
 const initiator = Account.generateNewAccount(NetworkType.MIJIN_TEST)

 const transferTransaction1 = TransferTransaction.create(
    Deadline.create(),
    recipient.address,
    [new Mosaic(new MosaicId('77A1969932D987D7'), UInt64.fromUint(1000000))],
    new PlainMessage(''),
    NetworkType.MIJIN_TEST,
    UInt64.fromUint(20000)
)
const transferTransaction2 = TransferTransaction.create(
    Deadline.create(),
    recipient.address,
    [new Mosaic(new MosaicId('77A1969932D987D7'), UInt64.fromUint(2000000))],
    new PlainMessage(''),
    NetworkType.MIJIN_TEST,
    UInt64.fromUint(20000)
)

const aggregateTransaction1 = AggregateTransaction.createBonded(
    Deadline.create(),
    [
        transferTransaction1.toAggregate(sender.publicAccount)
    ],
    NetworkType.MIJIN_TEST,
    UInt64.fromUint(20000)
)

const signedTransaction1 = initiator.sign(aggregateTransaction1, '')
console.log(signedTransaction1.payload)
console.log(recipient.address.plain())
console.log(sender.publicKey)
console.log(initiator.privateKey)
console.log(initiator.publicKey)

// D10000003B4859817AC7FB98F198356EFE1DF9252C9AB7E9F301FF4C9E5929C8E60F805367088EE0763A0B8C3CD720941A64D9F924885717F1E2660EB145889E4AA49D075846367DD6046129F019A2AC973BC3B51102A871977D13133EA371D8169058A9019041420000000000000000005C16B1180000005500000055000000B12D63B8816BE7718CE18D5B6DEAE69D7037B290C415613CB800357F7380DA5A0190544190147DFE25234D7403E15844B55721580628B8AD7751B9928601000100D787D9329996A17740420F0000000000
// SAKH37RFENGXIA7BLBCLKVZBLADCROFNO5I3TEUG
// B12D63B8816BE7718CE18D5B6DEAE69D7037B290C415613CB800357F7380DA5A
// C2DB529ED413E16D519413B73737E17E8ECED6FD61379389E1A25840E0FB2921
// 5846367DD6046129F019A2AC973BC3B51102A871977D13133EA371D8169058A9


const aggregateTransaction2 = AggregateTransaction.createComplete(
    Deadline.create(),
    [
        transferTransaction1.toAggregate(sender.publicAccount),
        transferTransaction2.toAggregate(sender.publicAccount)
    ],
    NetworkType.MIJIN_TEST,
    UInt64.fromUint(20000)
)

const signedTransaction2 = sender.sign(aggregateTransaction2, '')
console.log('-----------')
console.log(signedTransaction2.payload)

// 26010000F070D1019FBCBB2D2718563BB4AAF97F488F1EDFC25FE443A1EBE5C4221F8373FC2922FA397D55CB7F1941E8AF3F38EC2FC150268A35216C28F9A34479482306B12D63B8816BE7718CE18D5B6DEAE69D7037B290C415613CB800357F7380DA5A0190414100000000000000001B5C16B118000000AA00000055000000B12D63B8816BE7718CE18D5B6DEAE69D7037B290C415613CB800357F7380DA5A0190544190147DFE25234D7403E15844B55721580628B8AD7751B9928601000100D787D9329996A17740420F000000000055000000B12D63B8816BE7718CE18D5B6DEAE69D7037B290C415613CB800357F7380DA5A0190544190147DFE25234D7403E15844B55721580628B8AD7751B9928601000100D787D9329996A17780841E0000000000

const aggregateTransaction3 = AggregateTransaction.createBonded(
    Deadline.create(),
    [
        transferTransaction1.toAggregate(sender.publicAccount)
    ],
    NetworkType.MIJIN_TEST,
    UInt64.fromUint(20000)
)

const signedTransaction3 = initiator
    .signTransactionWithCosignatories(
        aggregateTransaction3,
        [sender],
        ''
    )
console.log('-----------')
console.log(signedTransaction3.payload)

// 310100007B45EBA6F9A2A7DAB00F2D38E422B4D8638EDD2F442A47DB75D8E7D13CCCEC08321FF0C21DEF4AF2B5F4866E7FE65C90BC820670E07BE6379E1EB4D8AB3DD90F5846367DD6046129F019A2AC973BC3B51102A871977D13133EA371D8169058A9019041420000000000000000275C16B1180000005500000055000000B12D63B8816BE7718CE18D5B6DEAE69D7037B290C415613CB800357F7380DA5A0190544190147DFE25234D7403E15844B55721580628B8AD7751B9928601000100D787D9329996A17740420F0000000000B12D63B8816BE7718CE18D5B6DEAE69D7037B290C415613CB800357F7380DA5A799FF18FA0F434936DE7A124BC7D74718D590F66A0F6233EF9AC78ABA613CFC330E1BCC8A8B35F1CEE9D3A38B09BF940F81304AE60CC830FA3CFCD17DE403002