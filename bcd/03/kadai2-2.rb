# https://api.blockcypher.com/v1/btc/main/blocks/000000000002dfb177c4acd494b3dd73b9abece24df11c62bb614a8c6c5665e2
# height 100008
# hex data https://blockchain.info/block/000000000000000000a7b4999c723ed9f308425708577c76827ade51062e135a?format=hex

require 'digest'

def doublehash(data)
  Digest::SHA256.hexdigest(Digest::SHA256.digest([data].pack("H*")))
end

block_hex = "010000009b9c3121e0643c696ae654cb0d4e3fd05ce74edfa060a3901723010000000000c556c926546e582aa5d0906264940f55aca18b9fdd020eefa22333288891057a862b1b4d4c86041b03a34c640201000000010000000000000000000000000000000000000000000000000000000000000000ffffffff07044c86041b0147ffffffff0100f2052a01000000434104ad3b4c6ee28cb0c438c87b4efe1c36e1e54c10efc690f24c2c02446def863c50e9bf482647727b415aa81b45d0f7aa42c2cb445e4d08f18b49c027b58b6b4041ac000000000100000001bd06367d15f5699ab2231160de4c74a4a8cfae4a97c1fc5a77a02aead8e391cb000000008b483045022100a1f2df66d173e668849694bd2c0dc77162278f34902483d55fb16631e39e37f10220157636faa19568e04f82dd477e9e6a10fefe99492a70ec23b338c633a6f28f5d014104a34f5f40605dd7d2b11a0ef3c9ab32be64318c2aa34b3a924f16ee8a9a0eabd8b7183bd8e1acb0569f3a6b4cfc912c575d0d83bc2ba7035fc59991205432479cffffffff0140420f00000000001976a9147d878427c2cffbbb117200ca85689269f73e7fcb88ac00000000"

# 000000000002dfb177c4acd494b3dd73b9abece24df11c62bb614a8c6c5665e2
puts doublehash(block_hex[0,160])


__END__

magicnum
?
blocksize
?
version (LE)
01000000
previous block hash (LE)
9b9c3121e0643c696ae654cb0d4e3fd05ce74edfa060a3901723010000000000
markle root (LE)
c556c926546e582aa5d0906264940f55aca18b9fdd020eefa22333288891057a
time (uint32 LE) (dec: 1293626246) (2010-12-29T21:37:26+09:00)
862b1b4d
bits
4c86041b
nonce
03a34c64
txsvi
02
txs
01000000010000000000000000000000000000000000000000000000000000000000000000ffffffff07044c86041b0147ffffffff0100f2052a01000000434104ad3b4c6ee28cb0c438c87b4efe1c36e1e54c10efc690f24c2c02446def863c50e9bf482647727b415aa81b45d0f7aa42c2cb445e4d08f18b49c027b58b6b4041ac000000000100000001bd06367d15f5699ab2231160de4c74a4a8cfae4a97c1fc5a77a02aead8e391cb000000008b483045022100a1f2df66d173e668849694bd2c0dc77162278f34902483d55fb16631e39e37f10220157636faa19568e04f82dd477e9e6a10fefe99492a70ec23b338c633a6f28f5d014104a34f5f40605dd7d2b11a0ef3c9ab32be64318c2aa34b3a924f16ee8a9a0eabd8b7183bd8e1acb0569f3a6b4cfc912c575d0d83bc2ba7035fc59991205432479cffffffff0140420f00000000001976a9147d878427c2cffbbb117200ca85689269f73e7fcb88ac00000000

