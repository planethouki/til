# https://api.blockcypher.com/v1/btc/main/txs/89878bfd69fba52876e5217faec126fc6a20b1845865d4038c12f03200793f48?includeHex=true

require 'digest'

def doublehash(data)
  Digest::SHA256.hexdigest(Digest::SHA256.digest([data].pack("H*")))
end

tx_hex = "0100000001bd06367d15f5699ab2231160de4c74a4a8cfae4a97c1fc5a77a02aead8e391cb000000008b483045022100a1f2df66d173e668849694bd2c0dc77162278f34902483d55fb16631e39e37f10220157636faa19568e04f82dd477e9e6a10fefe99492a70ec23b338c633a6f28f5d014104a34f5f40605dd7d2b11a0ef3c9ab32be64318c2aa34b3a924f16ee8a9a0eabd8b7183bd8e1acb0569f3a6b4cfc912c575d0d83bc2ba7035fc59991205432479cffffffff0140420f00000000001976a9147d878427c2cffbbb117200ca85689269f73e7fcb88ac00000000"

# tx hash = 89878bfd69fba52876e5217faec126fc6a20b1845865d4038c12f03200793f48
puts doublehash(tx_hex)


__END__


version
01000000
txins
01
txhashbuf
bd06367d15f5699ab2231160de4c74a4a8cfae4a97c1fc5a77a02aead8e391cb
txoutnum
00000000
scriptvi
8b
script
483045022100a1f2df66d173e668849694bd2c0dc77162278f34902483d55fb16631e39e37f10220157636faa19568e04f82dd477e9e6a10fefe99492a70ec23b338c633a6f28f5d014104a34f5f40605dd7d2b11a0ef3c9ab32be64318c2aa34b3a924f16ee8a9a0eabd8b7183bd8e1acb0569f3a6b4cfc912c575d0d83bc2ba7035fc59991205432479c
sequence
ffffffff
txouts
01
value
40420f0000000000
scriptvi
19
script
76a9147d878427c2cffbbb117200ca85689269f73e7fcb88ac
nlocktime
00000000

